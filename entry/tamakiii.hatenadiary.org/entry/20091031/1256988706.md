---
Title: GUI世代のためのCUI入門以前 — MacVimの導入
Category:
- Mac
- Vim
- GUI-CUI
- アプリケーション
- ソフト
Date: 2009-10-31T20:31:46+09:00
URL: https://tamakiii.hatenadiary.org/entry/20091031/1256988706
EditURL: https://blog.hatena.ne.jp/tamakiii/tamakiii.hatenadiary.org/atom/entry/17680117127139080696
---

先日 iTerm を紹介したばかりでしたが、今回はMac用テキストエディタのMacVimを紹介します。

MacVimはgVimと呼ばれるもののひとつで、グラフィカルでリッチな、より使いやすいCUIエディタです。と、言ってももうCUIなんだかGUIなんだかわからないような所まで進化しちゃってますが。
それでもCUIの柔軟性は失っていないので、おいしいところ取りかもしれません。今回はインストールに加えて、便利なプラグインをひとつ併せて紹介します。


[f:id:tamakiii:20091031203133p:image]


====


MacVimは以下のURLでダウンロードすることができます。ひとつ目は英語版、ふたつ目は日本語化パッチが当てられたものです。さほど英語に悩まされることもありませんし、不具合が生じて時間を取られてしまう可能性を考えると、英語版の方がお勧めです。
特にSnow Leopardを使っている方は英語版をダウンロードした方がよいと思います。私のSnow Leopard上では問題なく動作しています。
[http://code.google.com/p/macvim/]
[http://code.google.com/p/macvim-kaoriya/]


ページ中程のDownloadリンクをクリックして、ダウンロードが終わったらいつものようにマウント→インストール と進んでしまってください。特に何事もなく終わるはずです。
MacVim.app と共にdmgの中に入れられている "mvim" というファイルを適当なところに配置すると、コマンドラインからMacVimを立ち上げることができます。"/usr/bin" または "/usr/sbin" 辺りでよいかと思います。

>|zsh|
$ mvim hogefuga.sh
||<


MacVimを起動すると、おなじみのVimのスタートアップ画面（？）が表示されるはずです。

[f:id:tamakiii:20091031203221p:image]


現れたウィンドウですが、サイズは小さいですし上部のメニューバーが邪魔です。リサイズしてもメニューバーを右上のボタンで非表示にしても、次に再起動したときにはまた元に戻ってしまいます。

これらの設定は "~/.vimrc" に記述します。折角なので MacVim を使って編集してみてはいかがでしょうか。



1. まず一応ノーマルモードに移るために "esc" をカカッと押します。
2. コロンを押してコマンドモードに移ります
3. "edit ~/.vimrc" と入力してリターンを押します
4. すると画面が切り替わって、文字が現れるか真っ黒、もしくは真っ白な画面が現れるはずです
5. もう一度 "esc" を押してノーマルモードに移ります
6. 適当な場所まで、矢印キーか "hjkl" を使って移動します
7. "i" を押して挿入モードに移ります
8. あとは以下の内容を入力して、":w" で保存、":q" で終了します。
9. もう一度MacVimを立ち上げるかCommand+N で新しいウィンドウを立ち上げれば、画面全体にMacVimがふんぞり返っているのが見られるはずです


入力する内容はこうです

>|vim|
if has('gui_macvim')
    set transparency=3
    set guifont=Menlo:h12
    set lines=90 columns=200
    set guioptions-=T
endif
||<


一行目の "if has('gui_macvim')" は、その後に続く設定をMacVimにのみ適応させます。
"set transparency=3" は画面の透過度を3%にセットし、"set guifont=Menlo:h12" はフォントとサイズをセットしています。MenloはSnow Leopardから搭載されたフォントなので、Menloがインストールされていない環境では "Monaco" などに変えてみてください。

そして、最後のふたつですが "set lines=90 columns=200" は大きめにウィンドウサイズをセットして、はみ出した部分を自動的にMacVimに修正させて画面いっぱいの大きさにさせていて、"set guioptions-=T" は上部のメニューバー（タブ？）を無効にしています。



もし再起動後にこれらの設定が反映されない場合は、

>|vim|
:source ~/.vimrc
||<

を試してみてください。もしこれで何の変化もない場合は、ファイル名や保存した場所が間違っているか、内容が間違っている可能性があります。
これで変化があった場合はこの設定ファイルが読み込まれていないののかも知れません。バージョンが少し古いものでは .vimrc を読みにいかず、 .gvimrc を読みにいくようになっている可能性があります。
"~/.gvimrc" を作成して、

>|vim|
source ~/.vimrc
||<

とすれば動いてくれるはずです。






便利なプラグインの紹介ですが、今回は「NERD_commenter.vim」を紹介します。
NERD_commenter.vim は素早くソースコードをコメントアウトすることができる機能を提供してくれます。

[http://www.vim.org/scripts/script.php?script_id=1218]

上記のURLから最新版をダウンロードしてきたら解凍してみてください。
中には "doc" フォルダーと "plugin" フォルダーがあるはずです。
これらを "~/.vim" の中に入れることでインストールができます（docはその名前の通りドキュメントですが）。

".vim" フォルダーは先頭の一文字がドットで始まる不可視ファイルなのでFinderで見ることができません。 ですが iTermやMacVimでは見ることができます。


MacVimで ":!ls ~/.vim" として何も出てこない場合は "!mkdir ~/.vim" と入力してください。これでホームディレクトリ直下に .vim フォルダーが作られます（mkdir=Make Directory）。

続いて ":!open ~/.vim" とすると Finder が開くはずです。開いたフォルダーに、先ほどダウンロードしてきたファイルを入れればインストールは完了です。

MacVimを開き直して、下のようなプログラムを開くか打ち込むかした後、",c" と打って素早くスペースキーを押してみてください。なにか文字がある行がコメントアウトされるはずです。また逆にコメントアウトを外すこともできます。


test.c
>|cpp|
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    printf("HELLO WORLD\n");

    return 0;
}
||<



NERD_commenter.vim のように、インストールは簡単でも役に立つプログラムがたくさん使えるのがCUIのよいところです。
僕もまだまだ駆け出しですが、面白いものを発見したらまたここで紹介していきたいと思います。
また、面白いものがありましたらぜひ教えてくださいませ。

それでは今日はこのへんで。
では。
